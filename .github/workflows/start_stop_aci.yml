name: Schedule to start / stop Azure Container Instance

on:
    schedule:
        - cron: '50 12 * * 1-5'
        - cron: '20 13 * * 1-5'

jobs:
    start-stop-aci:
        runs-on: ubuntu-latest
        steps:
            - name: Log in to Azure
              uses: azure/login@v2
              with:
                creds: ${{ secrets.AURE_CREDENTIALS }} 

            - name: Start at 8:50AM
              if: github.event.schedule == '50 12 * * 1-5'
              run: |
               az container start --resource-group ${{ secrets.AZURE_RESOURCE_GROUP }} --name ${{ secrets.ACI_NAME }}
            
            - name: Stop at 9:20AM
              if: github.event.schedule == '20 13 * * 1-5'
              run: |
               az container stop --resource-group ${{ secrets.AZURE_RESOURCE_GROUP }} --name ${{ secrets.ACI_NAME }}
